<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Тесты</title>
    <link href="https://cdn.jsdelivr.net/npm/mocha@10.4.0/mocha.min.css" rel="stylesheet" />
</head>
<body>
    <h1>10 задание</h1>
    <div id="mocha"></div>

    <script src="https://cdn.jsdelivr.net/npm/mocha@10.4.0/mocha.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chai@4.4.1/chai.min.js"></script>
    
    <script src="../script.js"></script>

    <script>
        mocha.setup('bdd'); // Используем стиль BDD (describe/it)
        const assert = chai.assert; // Объявляем assert для удобства
    </script>
    
    <script>

        // --- ТЕСТ 1: Тестирование метода прототипа getShortInfo (Блок 9) ---
        describe('Задача 1: AnimeEntry.prototype.getShortInfo()', function() {
            const TestEntry = new AnimeEntry("Test Anime", 2025, 7.8);

            it('Должен возвращать строку, содержащую название и год', function() {
                const info = TestEntry.getShortInfo();
                assert.include(info, 'Test Anime', 'Строка должна содержать название аниме');
                assert.include(info, '2025', 'Строка должна содержать год 2025');
            });
            it('Должен возвращать тип данных string', function() {
                assert.typeOf(TestEntry.getShortInfo(), 'string', 'Результат должен быть строкой');
            });
        });

        // --- ТЕСТ 2: Тестирование геттера status объекта favoriteAnime (Блок 9) ---
        describe('Задача 2: Геттер favoriteAnime.status', function() {
            it('Должен возвращать "Продолжается (высокий статус)" при эпизодах >= 70', function() {
                favoriteAnime.episodes = 70; // Тестируем граничное значение
                assert.equal(favoriteAnime.status, "Продолжается (высокий статус)");
            });
            it('Должен возвращать "Завершен/В процессе" при эпизодах < 70', function() {
                favoriteAnime.episodes = 50;
                assert.equal(favoriteAnime.status, "Завершен/В процессе");
                // Восстанавливаем оригинальное значение для чистоты
                favoriteAnime.episodes = 76; 
            });
        });

    </script>

    <script>
        mocha.run();
    </script>
</body>
</html>